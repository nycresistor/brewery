#!/usr/bin/env python  
 
"""
1951 Leonard Refrigerator Daemon
  -- target platform Intel Edison
  -- temp sensor    a0
  -- switch         d4
  -- relay          d2
  -- rtd            spi
"""

import getopt
import mraa
import sys
import time

from leonard import hwux
from leonard import relay
from leonard import thermistor
from leonard import display

__version__ = "0.1"
app_name = "Leonard Daemon"

def usage():
    print "some usage info would be nice wouldn't it?"
    return 0


def main():

    # Grab command line arguments
    try:
        opts, args = getopt.getopt(sys.argv[1:], "ht:v", ["help", "temp="])
    except getopt.GetoptError, err:
        print str(err)
        usage()
        sys.exit(2)
    output = None
    tempformat = None
    verbose = False

    for o, a in opts:
        if o == "-v":
            verbose = True
            print "%s - %s" % (app_name, __version__)
        elif o in ("-h", "--help"):
            usage()
            sys.exit()
        elif o in ("-t", "--temp"):
            tempformat = a
        else:
            assert False, "unhandled option"
    if (tempformat):
        try:
            ftemp = thermistor.get_temp(0)
            display.plcd(ftemp)
        except getopt.GetoptError, err:
            print str(err)
            sys.exit(2)

    else:
        sys.exit(2)


if __name__ == "__main__":
    main()

